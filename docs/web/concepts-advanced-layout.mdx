---
title: Advanced Layout
description: Geocortex Web - Learn about Geocortex Web's advanced layout configuration options
---

## Nested Model Imports

In previous layout examples, layouts were shown where components related to a map, such as zoom buttons, were nested within a map. It was assumed that the component would bind to the map it was placed in, but why?

```xml
    <map config="map1" slot="main">
      <stack margin="0.5" slot="bottom-right" halign="end">
        <zoom margin="0.8"/>
        <geolocate id="geolocator" margin="0.5" config="geolocate" />
      </stack>
    </map>
```

Certain components, such as `<zoom/>` or `<geolocate/>`, require a `Map Model` to function. To locate a `Map Model`, the layout tree hierarchy will be searched upwards, starting at the requesting component. When a element in the layout is found that provides the required model, (in this case, the `<map/>` component provides a Map Model), the requesting component will import the model. If the correct model is not found on an upwards search, a breadth first search will be performed from the root of the layout tree.

Take this more complicated layout for example.

```xml
<?xml version="1.0" encoding="utf-8" ?>
<layout xmlns="https://geocortex.com/layout/v1">
    <split resizable="true" width="26">
        <map id="map-1" config="map-1" slot="main">
            <iwtm config="iwtm" slot="top-right"/>
            <stack margin="0.5" slot="bottom-right" halign="end">
                <zoom margin="0.5"/>
                <button config="measure-action" icon="measure" style="map-widget" margin="0.5"/>
                <geolocate margin="0.5" config="geolocate" />
            </stack>
        </map>

        <panel>
            <stack>
                <search config="search"/>
                <results-list config="results" active="false" />
            </stack>
            <feature-details config="feature-details"/>
        </panel>
    </split>
</layout>
```

This layout has a `<search>` component which requires the context of a specific map to function. However, this component is **not** nested within the `<map/>` component in the app. Therefore, it will start a breadth first search from the root of the layout to discover a map model and import it.

## Advanced Model Binding

Sometimes, you can have multiple components that need to bind to the same model.

```xml
<split>
    <panel id="left-panel">
        <scalebar active="true" models="#map"/>
        <results-list models="#map"/>
        <legend models="#map"/>
    </panel>
    <map id="map" />
</split>
```

To simplify this binding, we can take advantage of the default behavior of searching up the layout tree for the appropriate model and bind the map to the parent panel of the components which need to reference a map model.

```xml
<?xml version="1.0" encoding="utf-8" ?>
<layout xmlns="https://geocortex.com/layout/v1">
    <split>
        // highlight-next-line
        <panel id="left-panel" models="#map">
            <scalebar active="true"/>
            <results-list />
            <legend />
        </panel>
        <map id="map" />
    </split>
</layout>
```

## Component Defaults

Most components support the [`config` attribute](concepts-app-config.mdx#linking-layout-to-app-config), which links a component to configuration in the `app.json`. However, many components have default values they can supply for initialization instead of relying on configuration. This means that if you omit the `config` property for certain components, the component will attempt to create itself with its default values. An example of defining these default values can be seen in the `_getSerializableProperties` method of the model created for [this use case](usecases-implement-component-participate-app-config.mdx#participating-in-the-configuration-lifecycle). Its also the mechanism that powers the default map displayed by this layout.

```xml
<?xml version="1.0" encoding="utf-8" ?>
<layout xmlns="https://geocortex.com/layout/v1">
    <map>
        <zoom padding="0.5" slot="top-left"/>
    </map>
</layout>
```

## Presentation Attributes

Components support a number of presentation attributes to adjust their positioning and styling in the application after slotting. Some of these presentation attributes are accessible through the [Geocortex Web Designer](https://apps.geocortex.com/webviewer/designer/), and the rest be configured through layout.

:::note
Most components also support the core attributes [`config`](concepts-app-config.mdx#linking-layout-to-app-config), [`models`](concepts-layout.mdx#models) and all components support the [`id`](concepts-app-config.mdx#targeting-components-by-id) attribute, as well as any custom attributes the component defines.
:::

Several different presentations attributes are available. All attributes apply to all components unless otherwise stated.

-   Margin
-   Padding
-   Width
-   Height
-   Grow
-   Horizontal alignment
-   Vertical alignment

:::note
All dimensional units are expressed in 'em's, unless specified otherwise, where 1 em is equal to the current font size.
:::

### Margin

**Attribute name**: "margin".
**Expected value**: Either 0 or a positive number (integer or floating point).
**Description**: Sets the size of the white space outside of the component.

**Example**:

```xml
<map margin="1.5"/> <!-- Sets the margin on a map to be equal to 1.5x the current font size -->
```

### Padding

**Attribute name**: "padding".
**Expected value**: Either 0 or a positive number (integer or floating point).
**Description**: Sets the size of the white space between a component and its content.
**Applies to**: This attribute will only apply to components with children, due to technical restrictions.

**Example**:

```xml
<stack padding="0.5"/> <!-- Sets the padding on a stack to be equal to 0.5x the current font size -->
```

### Width and Height

**Attribute name**: "width".
**Expected value**: Em units: Either 0 or a positive number (integer or floating point). Example: 12.

**Default value**: If a width is not set, then the width shall be the natural width of the component (however much space it needs).
**Description**: Sets the width of a component. If em units, then the width is a literal value.

**Attribute name**: "height".
**Expected value**: Em units: Either 0 or a positive number (integer or floating point). Example: 12.

**Description**: Sets the height of a component. If em units, then the height is a literal value.

**Example**:

```xml
<!-- Sets the width of a map to 30em, and the height to 20em. -->
<map width="30em" height="20"/>
```

### Grow

**Attribute name**: "grow".
**Expected value**: Either 0 or a positive number (integer or floating point).
**Description**: Sets whether or not a component's width or height will grow over its parents primary axis. Components with a grow of 0 will fill to their natural or requested height. Components with a specified grow will fill up a percentage of the remaining space equal to their grow value divided by the total grow of all sibling components (including the component in question).
The default value for a component varies by component. For most components, if no grow value is specified, they will default to a grow value of "0". The following components however will have a default grow value of "1":

-   Map
-   Stack
-   Split

**Applies to**: All components may specify this value, but it will only take effect if the component is a child of a split or a stack. For stacks, grow indicates how the child grows along the vertical axis. For splits, grow indicates how the child grows along the horizontal axis.

**Example**:

```xml
<stack>
    <!-- Heading will take up whatever vertical space it requires, and will occupy its natural width. -->
    <text content="Heading"/>
    <!-- The first map will occupy 1/3 of the remaining vertical space, and will occupy the full width available. -->
    <map grow="1"/>
    <!-- The first map will occupy 2/3 of the remaining vertical space, and will occupy the full width available. -->
    <map grow="2"/>
</stack>
```

### Alignment

**Attribute name**: "halign".
**Expected value**: One of: "start", "center", or "end"
**Description**: Describes how the content of a component is aligned. For stacks and splits, the content is the child components. For a component like text, the content is the text itself.

**Attribute name**: "valign".
**Expected value**: One of: "start", "center", or "end"
**Description**: Describes how the content of a component is aligned. For stacks and splits, the content is the child components. For a component like text, the content is the text itself.

#### Effect on cross-axis stretching

All components will stretch across the cross-axis if the corresponding alignment attribute (halign for stacks, valign for splits) is not set on the parent of that component. But if a cross-axis alignment is set, then they will no longer stretch across the cross axis (otherwise the effect of alignment would not be observed).
Some components will stretch across the cross-axis even if the cross-axis alignment is set on the parent: map, stack, split.
